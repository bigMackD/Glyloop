<form (ngSubmit)="onSubmit()" class="space-y-6">
  <!-- Current range preview -->
  <div class="bg-blue-900/20 border border-blue-800 rounded-lg p-4">
    <p class="text-sm text-blue-200 mb-1" i18n="@@settings.tir.currentRange">Current TIR Range</p>
    <p class="text-2xl font-bold text-white">
      {{ localLower() }} - {{ localUpper() }} <span class="text-lg font-normal text-gray-400">mg/dL</span>
    </p>
  </div>

  <!-- Input fields -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="lower-bound" class="block text-sm font-medium text-gray-300 mb-2" i18n="@@settings.tir.lowerBound">
        Lower Bound
      </label>
      <input
        type="number"
        id="lower-bound"
        name="lower"
        class="w-full px-4 py-2 bg-gray-800 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="errors().lower"
        [class.border-gray-700]="!errors().lower"
        [(ngModel)]="localLower"
        (ngModelChange)="onValueChange()"
        (blur)="onBlur()"
        [disabled]="value().saving"
        min="0"
        max="1000"
        step="1"
        required
      />
      @if (errors().lower) {
        <p class="mt-1 text-sm text-red-400">{{ errors().lower }}</p>
      }
    </div>

    <div>
      <label for="upper-bound" class="block text-sm font-medium text-gray-300 mb-2" i18n="@@settings.tir.upperBound">
        Upper Bound
      </label>
      <input
        type="number"
        id="upper-bound"
        name="upper"
        class="w-full px-4 py-2 bg-gray-800 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
        [class.border-red-500]="errors().upper"
        [class.border-gray-700]="!errors().upper"
        [(ngModel)]="localUpper"
        (ngModelChange)="onValueChange()"
        (blur)="onBlur()"
        [disabled]="value().saving"
        min="0"
        max="1000"
        step="1"
        required
      />
      @if (errors().upper) {
        <p class="mt-1 text-sm text-red-400">{{ errors().upper }}</p>
      }
    </div>
  </div>

  <!-- Cross-field error -->
  @if (errors().cross) {
    <div class="bg-red-900/20 border border-red-800 rounded-lg p-3">
      <p class="text-sm text-red-200">{{ errors().cross }}</p>
    </div>
  }

  <!-- Helper text -->
  <div class="bg-gray-800 rounded-lg p-3">
    <p class="text-sm text-gray-400" i18n="@@settings.tir.helperText">
      Recommended range: 70-180 mg/dL. Values must be between 0 and 1000 mg/dL, with lower bound less than upper bound.
    </p>
  </div>

  <!-- Actions -->
  <div class="flex gap-3">
    <button
      type="submit"
      mat-flat-button
      color="primary"
      [disabled]="!isDirty() || !isValid() || value().saving"
      class="px-6"
    >
      @if (value().saving) {
        <span i18n="@@common.saving">Saving...</span>
      } @else {
        <span i18n="@@common.save">Save</span>
      }
    </button>
    <button
      type="button"
      mat-stroked-button
      [disabled]="!isDirty() || value().saving"
      (click)="onCancel()"
      class="px-6"
    >
      <span i18n="@@common.cancel">Cancel</span>
    </button>
  </div>
</form>
